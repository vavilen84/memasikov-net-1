$(document).ready(function(){new(Backbone.View.extend({el:".container",imageSelector:"#photo img",json:null,events:{"click .upload-mem":"saveMem"},initialize:function(){this.initMemGenerator()},saveMem:function(e){e.preventDefault();var a=this,t=Global.homeUrl+Global.createMemUrl,o=$(a.imageSelector);$.ajax({url:t,type:"POST",data:{json:o.memeGenerator("serialize"),baseImageId:o.attr("data-base_image_id"),hash:Global.hash},success:function(e){e=JSON.parse(e),"success"==e.status?window.location.href=Global.homeUrl+Global.userImageUrl+e.uid:alert(e.errorMessage)}})},initMemGenerator:function(){var e=this;$(e.imageSelector).memeGenerator({useBootstrap:!0})}}))});